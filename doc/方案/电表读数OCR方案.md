# 电表读数文字识别(OCR)解决方案

## 1. 概述
在电力运维和能耗管理中，自动识别电表读数是数字化的基础。本方案基于 PaddleX 工业级 OCR 识别框架，专门针对电表显示区域进行优化。系统能够自动识别复杂的电表数字（包括前导零和浮点数），并提供高精度的位置标注，适用于各种环境下的电表自动抄表场景。

## 2. 数据采集方案
本方案通过视觉方式获取电表液晶屏或滚轮显示的读数。

### 2.1 硬件选型
| 设备名称 | 推荐型号 | 关键参数 | 适用场景 |
|---|---|---|---|
| **红外工业相机** | 大恒图像 (Daheng) 水星系列 | 500万像素, 全局快门 | 针对反光严重的电表窗口 |
| **微距镜头** | 12mm - 25mm 工业镜头 | 低畸变, 高分辨率 | 确保数字区域占满画面 |
| **嵌入式网关** | NVIDIA Jetson Orin Nano | 支持模型端侧推理 | 现场实时识别与回传 |

### 2.2 采集点位与环境要求
- **点位选择**：相机应安装在电表箱内正对表盘的位置，距离表盘 15cm - 30cm。
- **光照控制**：对于无背光的液晶屏，需加装侧向 LED 条形光源，避免正对光源产生光斑。
- **采样频率**：通常每 15-30 分钟采集一次图像，或根据能耗监控需求实时采集。

## 3. 方案架构
本方案基于全流程 OCR 识别管道：
- **图像预处理**：对原始图像进行自适应缩放（最大长边限制），保证识别速度与精度的平衡。
- **文本检测**：定位电表显示区域中的文字/数字块。
- **文本识别**：对检测到的区域进行字符识别，并输出置信度。
- **业务逻辑过滤**：根据电表读数特征（如数字长度、前导零、小数点等）进行后处理。

## 3. 数据准备
### 3.1 场景支持
- **图像格式**：支持 JPG, PNG, JPEG。
- **场景覆盖**：适用于数字显示屏、滚轮计数器等不同类型的电表。
- **中文字体**：集成文泉驿微米黑字体，支持中文标注显示。

## 4. 模型开发
### 4.1 核心框架
- **PaddleX Pipeline**：采用 PaddleX 预训练的工业 OCR 识别管道，支持一键加载和切换。
- **模型多样性**：支持多种不同参数量的 OCR 模型，平衡移动端速度与服务器端精度。

### 4.2 识别策略
- **长边缩放**：将输入图片限制在 1280 像素以内，优化 GPU 显存占用。
- **置信度阈值**：过滤掉置信度低于 0.5 的识别结果，确保读数准确。
- **业务过滤规则**：
    1. 优先识别长度在 4-7 位之间的数字。
    2. 对于多个结果，根据前导零规则进行筛选。
    3. 自动剔除低可信度的碎片文字。

## 5. 部署与可视化
- **交互界面**：基于 Gradio 构建，提供示例图片画廊和模型在线切换功能。
- **实时标注**：在图像上使用多色多边形框标注识别出的文字区域，并同步显示识别文本及置信度百分比。
- **容错处理**：支持备用 `.yaml` 配置文件加载，增强系统在不同环境下的部署鲁棒性。
