# 涂胶机视觉分类系统应用方案

## 一、 系统总体架构

系统采用 **"端-边-云"** 三层架构，实现涂胶机涂胶区域图像采集、实时NG/OK二分类识别、结果反馈与模型迭代全流程闭环：

1. **感知层（Image Acquisition）**：在涂胶机出料工位部署视觉采集设备，实时采集涂胶工件表面图像，同步记录采集场景参数（涂胶型号、工位信息）；对接公开数据集，补充多场景涂胶图像样本。

2. **边缘层（Edge Processing）**：对采集图像进行预处理（去噪、尺寸标准化等），运行轻量化图像分类算法，快速输出NG/OK二分类结果；若判定为NG，立即触发涂胶机停机预警。

3. **云/平台层（Cloud/Platform）**：存储公开数据集与现场采集图像、训练优化分类模型、管理分类任务、统计识别质量指标，支撑模型迭代升级与全场景适配。

---

## 二、 感知与数据采集层 (Image Acquisition)

### 2.1 关键采集点位与机理分析

|采集位置|采集对象|分类影响机理|推荐采集设备/辅助装置|
|---|---|---|---|
|**涂胶机出料工位**|涂胶工件表面涂胶区域（OK：涂胶均匀、无漏涂/溢胶；NG：漏涂、溢胶、气泡、涂胶偏移）|工业环境光照不均导致涂胶区域对比度低；工件摆放偏移造成涂胶区域定位偏差；粉尘干扰导致图像噪声污染|工业面阵相机、条形光源、抗反光滤镜、图像采集卡、工件定位夹具|
|**公开数据集补充**|多型号工件、多涂胶工艺的NG/OK标准图像|公开数据集覆盖场景全面，可弥补现场样本单一问题，提升模型泛化能力；需筛选与实际生产匹配的图像样本|数据集存储服务器、数据清洗终端|
|**复检校验工位**|边缘层分类存疑的涂胶图像、对应实物工件|图像模糊、涂胶缺陷轻微导致分类歧义；工件表面污渍误判为涂胶缺陷|高清工业相机、可调焦镜头、补光装置、图像放大终端|
### 2.2 采集设备选型与配置标准

|设备类别|设备类型|规格指标建议|采集/数据处理策略|
|---|---|---|---|
|**固定采集设备**|工业面阵相机+条形光源|分辨率≥500万像素，帧率≥30fps，快门速度≤1/1000s；光源波长450-550nm，亮度连续可调；镜头焦距25-50mm|触发式采集：工件到位后触发相机拍摄，单工件采集1-2张涂胶区域清晰图像；同步记录工件型号、涂胶参数、采集时间；图像格式统一为JPG/PNG，尺寸标准化为640×480像素|
|**公开数据集处理设备**|数据存储服务器+处理终端|服务器存储容量≥10TB，支持高速读写；处理终端CPU≥8核，内存≥16GB|数据集筛选：选择公开涂胶缺陷数据集（如涂胶质量检测公开数据集、工业缺陷检测通用数据集），筛选涂胶OK/NG二分类样本；数据预处理：统一图像尺寸、调整亮度对比度，使其与现场采集图像特征对齐|
|**复检辅助设备**|高清工业相机+图像放大终端|分辨率≥800万像素，支持自动对焦，放大倍率5-20倍；终端支持图像对比、标注功能|按需采集：针对边缘层分类置信度＜0.9的图像，手动采集高清细节图像；与原始图像对比，人工判定真实类别，补充至训练数据集|
### 2.3 数据集来源
网络公开数据集：

数据集地址：https://aistudio.baidu.com/datasetdetail/84101


---

## 三、 数据处理与特征工程 (Data Processing)

在边缘端与云端协同完成数据处理，提取涂胶区域核心特征，为二分类模型提供高质量数据支撑，兼顾实时性与识别精度：

### 3.1 图像预处理特征 (Image Preprocessing)

- **图像增强与降噪**：采用自适应对比度增强（CLAHE）提升涂胶区域与工件表面的区分度；通过高斯滤波去除工业环境粉尘噪声，中值滤波消除图像椒盐噪声；针对光照不均问题，采用光照补偿算法修正图像亮度分布。

- **标准化处理**：将所有图像统一缩放至640×480像素，采用归一化处理（像素值映射至[0,1]区间），消除尺寸与亮度量级差异；对图像进行随机水平翻转、轻微旋转（±5°）的数据增强，扩充训练样本多样性。

### 3.2 涂胶缺陷核心特征 (Glue Defect Core Features)

- **形态学特征**：提取涂胶区域的轮廓面积、周长、圆形度、长宽比；通过边缘检测（Canny算法）获取涂胶边缘的连续性特征，OK图像涂胶边缘连续平滑，NG图像（如漏涂、溢胶）边缘断裂或不规则。

- **纹理与梯度特征**：基于HOG（方向梯度直方图）提取涂胶区域纹理特征，区分均匀涂胶（OK）与气泡、杂质（NG）；通过LBP（局部二值模式）特征捕捉涂胶表面粗糙度差异，辅助判断涂胶质量。

### 3.3 数据集优化特征 (Dataset Optimization Features)

- **数据清洗特征**：剔除公开数据集中与实际生产场景差异过大的样本（如不同材质、不同涂胶类型的图像）；对标注错误的样本进行修正，删除模糊、遮挡严重的无效样本；采用SMOTE算法处理数据集类别不平衡问题（若OK/NG样本比例＞10:1）。

- **数据划分特征**：将融合后的数据集（公开数据集+现场采集数据）按7:2:1比例划分训练集、验证集、测试集；确保各数据集内OK/NG样本比例一致，避免数据分布偏差影响模型训练效果。

---

## 四、 核心算法模型方案 (Algorithm & Modelling)

采用 **"轻量化分类模型+模型优化+置信度校验"** 架构，解决涂胶机视觉分类实时性与识别精度平衡问题，核心实现NG/OK二分类：

### 4.1 阶段一：核心分类模型选型与部署 (Core Classification Model)

**目标**：选择适配边缘端部署的轻量化图像分类算法，实现涂胶图像快速、精准的二分类。

-**模型选型**：MobileNetV2（轻量化CNN模型）

**选型依据**：采用深度可分离卷积结构，参数数量少（仅传统CNN的1/10），推理速度快，适配边缘端有限算力；具备较强的特征提取能力，在工业缺陷二分类任务中泛化性能优异。

**模型调整**：将MobileNetV2原始分类层替换为二分类输出层（Sigmoid激活函数）；添加Dropout层（dropout rate=0.5）抑制过拟合；优化损失函数为交叉熵损失函数，适配二分类任务。

**边缘端部署**：将训练好的模型转换为ONNX格式，通过TensorRT进行推理加速；部署至边缘计算模块，确保单张图像推理时延≤300ms。

### 4.2 阶段二：模型优化策略 (Model Optimization)

**目标**：基于融合数据集持续优化模型，提升复杂场景下的分类精度。

- **迁移学习优化**：利用MobileNetV2预训练权重（基于ImageNet数据集），在融合数据集上进行微调；冻结骨干网络前10层，仅训练分类层与后几层卷积层，加快训练速度，提升模型泛化能力。

- **难例样本优化**：提取测试集中分类错误的难例样本（如轻微溢胶、小面积漏涂），构建难例数据集；针对难例数据集进行二次训练，调整学习率（采用余弦退火学习率策略），优化模型对细微缺陷的识别能力。

### 4.3 阶段三：分类结果校验与反馈 (Result Verification & Feedback)

**目标**：降低误判率，确保分类结果可靠，及时反馈至涂胶机控制系统。

- **置信度校验**：设定置信度阈值（0.9），当模型输出置信度≥0.9时，直接输出OK/NG结果；当置信度＜0.9时，标记为“存疑样本”，推送至人工复检终端。

-**结果反馈**：若判定为NG，立即发送信号至涂胶机控制系统，触发停机预警，并记录NG类型（漏涂/溢胶等）；人工复检完成后，将修正后的标签反馈至云端，用于模型增量训练。

---

## 五、 模型训练与验证 (Training & Validation)

### 5.1 数据集构建策略

1. **公开数据集筛选**：选取工业涂胶缺陷相关公开数据集（如Kaggle工业缺陷检测数据集、国内工业视觉公开数据集平台的涂胶质量数据），筛选出OK/NG二分类样本，预计样本量≥10000张（OK:NG≈7:3）。

2. **现场数据集补充**：在涂胶机生产现场采集不同工件型号、不同涂胶参数下的OK/NG图像，补充样本量≥5000张；重点采集公开数据集中缺失的场景样本（如特定材质工件涂胶图像）。

3. **数据集融合与优化**：融合公开数据集与现场数据集，进行数据清洗、标准化处理；采用数据增强技术（随机裁剪、亮度扰动、加噪等）扩充样本至20000张以上；按7:2:1比例划分训练集、验证集、测试集，确保数据分布均衡。

4. **难例数据集构建**：收集训练与验证过程中分类错误的样本，标注详细缺陷类型，构建难例数据集（样本量≥2000张），用于模型针对性优化。

### 5.2 评价指标体系 (KPIs)

- **分类准确性指标**：

**总体准确率（Accuracy）**：正确分类的样本数占总样本数的比例，目标≥90%。

**精确率（Precision）与召回率（Recall）**：NG样本精确率≥90%（避免将OK误判为NG）；NG样本召回率≥99%（避免漏判NG样本）。

**F1-Score**：平衡精确率与召回率，目标≥95%。

- **实时性指标**：

**模型推理时延**：边缘端单张图像分类时延≤300ms，满足涂胶机生产节拍要求（≥30件/分钟）。

**系统响应时延**：从图像采集完成到输出分类结果并反馈至涂胶机控制系统的总时延≤500ms。

- **模型稳定性指标**：

**长时间运行稳定性**：连续运行72小时，模型分类准确率波动≤0.5%。

**多场景适配性**：在3种以上不同工件型号场景下，分类准确率均≥98.5%。

- **数据质量指标**：

**数据集标注准确率**：人工标注样本的抽检准确率≥99.8%。

**数据完整性**：覆盖主要涂胶缺陷类型（漏涂、溢胶、气泡、涂胶偏移）的样本占比≥95%。

---
